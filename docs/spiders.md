# üï∑Ô∏è Spider Implementation Strategy

This project employs a **hybrid extraction strategy**. Rather than forcing a single method (like Selenium) on every site, we tailor the extraction logic to the specific architecture of the target retailer.

This approach minimizes **computational overhead** and maximizes **reliability**.

## 1. Bunnings Warehouse (Hydration State Extraction)
**Target:** [bunnings.com.au](https://www.bunnings.com.au)  
**Tech Stack:** Next.js / React (SPA)

### ‚ùå The Challenge
Bunnings is a heavy Single Page Application (SPA). The initial HTML returned by the server is largely empty scaffolding, with content populated via client-side JavaScript. Using a headless browser (Playwright/Selenium) to render this would be too slow (approx. 5-10s per page) and resource-intensive for catalog-level scraping.

### ‚úÖ The Solution: `__NEXT_DATA__` Parsing
Instead of rendering the page, we parse the raw HTML to locate the Next.js hydration script.

* **Method:** We extract the JSON blob directly from the `<script id="__NEXT_DATA__">` tag.
* **Benefit:** This provides the **entire product state** (price, stock, specifications) in a structured JSON format without executing a single line of JavaScript.

### ‚ö†Ô∏è Complexity Analysis: The Next.js 13+ Shift
**Current State (Pages Router):**
The Bunnings spider relies on the `__NEXT_DATA__` script tag, which is standard in Next.js "Pages Router" architecture. This provides a clean, singular JSON blob of the page state.

**The Upcoming Challenge (App Router):**
Modern Next.js sites (v13+) are migrating to **React Server Components (RSC)**.
* **Impact:** The `__NEXT_DATA__` blob is removed. Data is no longer a single JSON object but is streamed incrementally using the **React Flight** protocol.
* **Detection:** These sites use `self.__next_f.push([...])` to inject partial data chunks.
* **Strategy:** My future-proof parser is designed to aggregate these partial chunks into a coherent JSON object, ensuring longevity as retailers upgrade their stacks.

---

## 2. Officeworks (Private API Reverse-Engineering)
**Target:** [officeworks.com.au](https://www.officeworks.com.au)  
**Tech Stack:** Enterprise Commerce Cloud / Complex AJAX

### ‚ùå The Challenge
Officeworks uses complex navigation and lazy loading. Traversing the category tree via the DOM is fragile and prone to breaking when UI layouts update. The data is often loaded asynchronously after the initial page load.

### ‚úÖ The Solution: Internal API Replication
By inspecting network traffic, we identified their private product API endpoints.

* **Strategy:** We replicate the browser's request headers (specifically `x-api-key` or session tokens) to query their internal backend directly.
* **Benefit:** Decouples our scraper from the frontend UI. We get clean, structured data regardless of how often they change their website's CSS classes.

---

## 3. PLE Computers (Robust CSS Selectors)
**Target:** [ple.com.au](https://www.ple.com.au)  
**Tech Stack:** Server-Side Rendered (ASP.NET/PHP style)

### ‚ùå The Challenge
PLE is a more traditional e-commerce site. The structure is relatively stable, but class names can sometimes be generic or reused across different page types.

### ‚úÖ The Solution: Semantic CSS Selectors
For standard HTML pages, CSS selectors offer the best balance of readability and speed.

* **Strategy:** We target semantic HTML attributes rather than fragile layout classes.

---

## 4. Supercheap Auto & Umart (XPath Traversal)
**Target:** [supercheapauto.com.au](https://www.supercheapauto.com.au), [umart.com.au](https://www.umart.com.au)  
**Tech Stack:** Salesforce Commerce Cloud (SCA) / Legacy Custom (Umart)

### ‚ùå The Challenge
These sites present "dirty" HTML structures.
* **SCA:** Deeply nested `div` structures with dynamic classes generated by Salesforce.
* **Umart:** Legacy tables where data is not labelled with classes, but by position or text labels.

### ‚úÖ The Solution: XPath
We utilize XPath for its ability to traverse the DOM relative to specific text anchors ("Anchor and Pivot").


